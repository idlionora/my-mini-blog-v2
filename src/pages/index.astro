---
import MainLayout from "@layouts/MainLayout.astro"

---

<MainLayout title="myMiniBlog">
	<main class="w-full px-4 sm:px-5 flex flex-col items-center">
		<h2 class="font-heading font-bold text-[1.25rem] bg-theme-blue px-4 py-3 w-full max-w-[18rem] text-center rounded-2xl text-neutral-100 mt-9 mb-7">All Blog Posts</h2>
		<section id="fetch-message" class="w-full flex flex-col items-center text-center"><img src="/images/noun-download-6624142.png" alt="Downloading from Database" class="px-1 w-28 mt-8 filter-green-500"><p class="text-[1.5rem] text-green-500 mt-5 w-full">Fetching data, please&nbsp;wait...</p></section>
		<section id="blogcard-container" class="w-full max-w-screen-xl flex flex-col items-center sm:items-stretch sm:grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7 pb-28"></section>
	</main>
</MainLayout>

<script>
	import axios from "axios";

	const fetchMessage = document.getElementById('fetch-message');
	const cardContainer = document.getElementById('blogcard-container');

	try {
		const res = (await axios.get(`${import.meta.env.PUBLIC_APISITE}/blogposts/?fields=title,summary,slug,blogpostImg,tags,createdAt,user,commentCount`));
		const cardsData = res.data.data;

		// const cardsInsert = cardsData.map((card, index) => {return <BlogCard frontmatter={card} {index} />})
		console.log(res)
	} catch(err) {
		console.log(err)

	}

</script>
